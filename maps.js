// Tile types
// 0 = empty, 1 = brick, 2 = steel, 3 = water, 4 = bush, 5 = base(eagle)

const MAPS = [
  {
    name: "Classic",
    mode: 'coop', // co-op vs enemies
    tiles: buildMap([
      "..........1111111111..........",
      "..........1111111111..........",
      "1111..1111....11....1111..1111",
      "1111..1111....11....1111..1111",
      "1111..1111..........1111..1111",
      "1111..1111..........1111..1111",
      "1111..........22..........1111",
      "1111..........22..........1111",
      "1111..1111..........1111..1111",
      "1111..1111..........1111..1111",
      "..11..1111..1111....1111..11..",
      "..11..1111..1111....1111..11..",
      "................11............",
      "................11............",
      "..11..11....11111111....11..11",
      "..11..11....11111111....11..11",
      "1111........11....11........11",
      "1111........11....11........11",
      "1111..1111..........1111..1111",
      "1111..1111..........1111..1111",
      "..11..1111..1111....1111..11..",
      "..11..1111..1111....1111..11..",
      "..........1111..1111..........",
      "..........1111..1111..........",
      "............1..1..............",
      "............1551..............",
    ])
  },
  {
    name: "Fortress",
    mode: 'coop',
    tiles: buildMap([
      "..........................",
      "..........................",
      "..2222..........2222......",
      "..2222..........2222......",
      "..22..1111..1111..22......",
      "..22..1111..1111..22......",
      "......11........11........",
      "......11........11........",
      "..22..11..2222..11..22....",
      "..22..11..2222..11..22....",
      "......11........11........",
      "......11........11........",
      "..1111..1111..1111..1111..",
      "..1111..1111..1111..1111..",
      "....................22....",
      "....................22....",
      "..11..11......11..11......",
      "..11..11......11..11......",
      "..11..1111..1111..11......",
      "..11..1111..1111..11......",
      "..11..............11......",
      "..11..............11......",
      "..1111111111..1111111111..",
      "..1111111111..1111111111..",
      "............1..1..........",
      "............1551..........",
    ])
  },
  {
    name: "Deathmatch Arena",
    mode: 'deathmatch',
    tiles: buildMap([
      "22222222222222222222222222",
      "2........................2",
      "2..1111..........1111..2.",
      "2..1111..........1111..2.",
      "2..............2.......2.",
      "2..1111........2..1111.2.",
      "2..............2.......2.",
      "2.....11111111111......2.",
      "2..............................",
      "2..11........2........11...2.",
      "2..11........2........11...2.",
      "2............................2",
      "2..2222...........2222.....2.",
      "2.............................2",
      "2..11..11111..11111..11....2.",
      "2..11..............11......2.",
      "2.............................2",
      "2..2222...........2222.....2.",
      "2............................2",
      "2..11........2........11...2.",
      "2..11........2........11...2.",
      "2..............................",
      "2..1111..........1111......2.",
      "2..1111..........1111......2.",
      "2........................2.",
      "22222222222222222222222222",
    ])
  },
  {
    name: "DM with Bots",
    mode: 'deathmatch_bots',
    tiles: buildMap([
      "22222222222222222222222222",
      "2........................2",
      "2..1111..........1111....2",
      "2..1111..........1111....2",
      "2.......22...22..........2",
      "2..11...22...22...11.....2",
      "2..11............11......2",
      "2....11111111111.........2",
      "2........................2",
      "2..11....22....22....11..2",
      "2..11....22....22....11..2",
      "2........................2",
      "2...2222.........2222....2",
      "2........................2",
      "2...11..11111.11111..11..2",
      "2...11...............11..2",
      "2........................2",
      "2...2222.........2222....2",
      "2........................2",
      "2..11....22....22....11..2",
      "2..11....22....22....11..2",
      "2........................2",
      "2..1111..........1111....2",
      "2..1111..........1111....2",
      "2........................2",
      "22222222222222222222222222",
    ])
  },
];

function buildMap(rows) {
  const grid = [];
  // Normalize all rows to 26 chars
  for (let r = 0; r < 26; r++) {
    const row = (rows[r] || '').padEnd(26, '.');
    for (let c = 0; c < 26; c++) {
      const ch = row[c];
      let val = 0;
      if      (ch === '1') val = 1;
      else if (ch === '2') val = 2;
      else if (ch === '3') val = 3;
      else if (ch === '4') val = 4;
      else if (ch === '5') val = 5;
      grid.push(val);
    }
  }
  return grid;
}

// 4 classic spawn points
const SPAWN_POINTS = [
  { x: 0,  y: 24 },
  { x: 24, y: 24 },
  { x: 0,  y: 0  },
  { x: 24, y: 0  },
];

// 8 deathmatch spawn points spread across the map
const DM_SPAWN_POINTS = [
  { x: 1,  y: 1  },
  { x: 24, y: 1  },
  { x: 1,  y: 24 },
  { x: 24, y: 24 },
  { x: 12, y: 1  },
  { x: 1,  y: 12 },
  { x: 24, y: 12 },
  { x: 12, y: 24 },
];

// Enemy spawn points (classic mode)
const ENEMY_SPAWNS = [
  { x: 0,  y: 0 },
  { x: 12, y: 0 },
  { x: 24, y: 0 },
];

module.exports = { MAPS, SPAWN_POINTS, DM_SPAWN_POINTS, ENEMY_SPAWNS };