'use strict';
// Tile types: 0=empty 1=brick 2=steel 3=water 4=bush 5=eagle

const MAPS = [
  // ── 0: Classic (26×26) ───────────────────────────────────
  {
    name: 'Classic',
    mode: 'coop',
    cols: 26, rows: 26,
    tiles: buildMap(26, 26, [
      "..........1111111111..........",
      "..........1111111111..........",
      "1111..1111....11....1111..1111",
      "1111..1111....11....1111..1111",
      "1111..1111..........1111..1111",
      "1111..1111..........1111..1111",
      "1111..........22..........1111",
      "1111..........22..........1111",
      "1111..1111..........1111..1111",
      "1111..1111..........1111..1111",
      "..11..1111..1111....1111..11..",
      "..11..1111..1111....1111..11..",
      "................11............",
      "................11............",
      "..11..11....11111111....11..11",
      "..11..11....11111111....11..11",
      "1111........11....11........11",
      "1111........11....11........11",
      "1111..1111..........1111..1111",
      "1111..1111..........1111..1111",
      "..11..1111..1111....1111..11..",
      "..11..1111..1111....1111..11..",
      "..........1111..1111..........",
      "..........1111..1111..........",
      "............1..1..............",
      "............1551..............",
    ]),
    spawnPoints: [
      {x:0,y:24},{x:24,y:24},{x:0,y:0},{x:24,y:0},
    ],
    enemySpawns: [{x:0,y:0},{x:12,y:0},{x:24,y:0}],
    dmSpawnPoints: [],
  },

  // ── 1: Fortress (26×26) ──────────────────────────────────
  {
    name: 'Fortress',
    mode: 'coop',
    cols: 26, rows: 26,
    tiles: buildMap(26, 26, [
      "..........................",
      "..........................",
      "..2222..........2222......",
      "..2222..........2222......",
      "..22..1111..1111..22......",
      "..22..1111..1111..22......",
      "......11........11........",
      "......11........11........",
      "..22..11..2222..11..22....",
      "..22..11..2222..11..22....",
      "......11........11........",
      "......11........11........",
      "..1111..1111..1111..1111..",
      "..1111..1111..1111..1111..",
      "....................22....",
      "....................22....",
      "..11..11......11..11......",
      "..11..11......11..11......",
      "..11..1111..1111..11......",
      "..11..1111..1111..11......",
      "..11..............11......",
      "..11..............11......",
      "..1111111111..1111111111..",
      "..1111111111..1111111111..",
      "............1..1..........",
      "............1551..........",
    ]),
    spawnPoints: [
      {x:0,y:24},{x:24,y:24},{x:0,y:0},{x:24,y:0},
    ],
    enemySpawns: [{x:0,y:0},{x:12,y:0},{x:24,y:0}],
    dmSpawnPoints: [],
  },

  // ── 2: Deathmatch Arena (26×26) ──────────────────────────
  {
    name: 'Deathmatch Arena',
    mode: 'deathmatch',
    cols: 26, rows: 26,
    tiles: buildMap(26, 26, [
      "22222222222222222222222222",
      "2........................2",
      "2..1111..........1111....2",
      "2..1111..........1111....2",
      "2.......22...22..........2",
      "2..11...22...22...11.....2",
      "2..11............11......2",
      "2....11111111111.........2",
      "2........................2",
      "2..11....22....22....11..2",
      "2..11....22....22....11..2",
      "2........................2",
      "2...2222.........2222....2",
      "2........................2",
      "2...11..11111.11111..11..2",
      "2...11...............11..2",
      "2........................2",
      "2...2222.........2222....2",
      "2........................2",
      "2..11....22....22....11..2",
      "2..11....22....22....11..2",
      "2........................2",
      "2..1111..........1111....2",
      "2..1111..........1111....2",
      "2........................2",
      "22222222222222222222222222",
    ]),
    spawnPoints: [],
    enemySpawns: [],
    dmSpawnPoints: [
      {x:1,y:1},{x:24,y:1},{x:1,y:24},{x:24,y:24},
      {x:12,y:1},{x:1,y:12},{x:24,y:12},{x:12,y:24},
    ],
  },

  // ── 3: DM with Bots (26×26) ──────────────────────────────
  {
    name: 'DM with Bots',
    mode: 'deathmatch_bots',
    cols: 26, rows: 26,
    tiles: buildMap(26, 26, [
      "22222222222222222222222222",
      "2........................2",
      "2..1111..........1111....2",
      "2..1111..........1111....2",
      "2.......22...22..........2",
      "2..11...22...22...11.....2",
      "2..11............11......2",
      "2....11111111111.........2",
      "2........................2",
      "2..11....22....22....11..2",
      "2..11....22....22....11..2",
      "2........................2",
      "2...2222.........2222....2",
      "2........................2",
      "2...11..11111.11111..11..2",
      "2...11...............11..2",
      "2........................2",
      "2...2222.........2222....2",
      "2........................2",
      "2..11....22....22....11..2",
      "2..11....22....22....11..2",
      "2........................2",
      "2..1111..........1111....2",
      "2..1111..........1111....2",
      "2........................2",
      "22222222222222222222222222",
    ]),
    spawnPoints: [],
    enemySpawns: [],
    dmSpawnPoints: [
      {x:1,y:1},{x:24,y:1},{x:1,y:24},{x:24,y:24},
      {x:12,y:1},{x:1,y:12},{x:24,y:12},{x:12,y:24},
    ],
  },

  // ── 4: Mini DM with Bots (15×15) ─────────────────────────
  {
    name: 'Mini DM with Bots',
    mode: 'deathmatch_bots',
    cols: 15, rows: 15,
    tiles: buildMap(15, 15, [
      "222222222222222",
      "2.............2",
      "2.11..2..11...2",
      "2.............2",
      "2..2.....2....2",
      "2.11.....11...2",
      "2.............2",
      "2...2.2.2.....2",
      "2.............2",
      "2.11.....11...2",
      "2..2.....2....2",
      "2.............2",
      "2.11..2..11...2",
      "2.............2",
      "222222222222222",
    ]),
    spawnPoints: [],
    enemySpawns: [],
    dmSpawnPoints: [
      {x:1, y:1},  {x:13,y:1},
      {x:1, y:13}, {x:13,y:13},
      {x:7, y:1},  {x:1, y:7},
      {x:13,y:7},  {x:7, y:13},
    ],
  },
];

// ── Generic map builder (any size) ────────────────────────
function buildMap(cols, rows, lines) {
  const grid = [];
  for (let r = 0; r < rows; r++) {
    const row = (lines[r] || '').padEnd(cols, '.');
    for (let c = 0; c < cols; c++) {
      const ch = row[c];
      grid.push(
        ch==='1'?1 : ch==='2'?2 : ch==='3'?3 : ch==='4'?4 : ch==='5'?5 : 0
      );
    }
  }
  return grid;
}

// Legacy global spawn points (still used as fallbacks)
const SPAWN_POINTS    = [{x:0,y:24},{x:24,y:24},{x:0,y:0},{x:24,y:0}];
const DM_SPAWN_POINTS = [
  {x:1,y:1},{x:24,y:1},{x:1,y:24},{x:24,y:24},
  {x:12,y:1},{x:1,y:12},{x:24,y:12},{x:12,y:24},
];
const ENEMY_SPAWNS    = [{x:0,y:0},{x:12,y:0},{x:24,y:0}];

module.exports = { MAPS, SPAWN_POINTS, DM_SPAWN_POINTS, ENEMY_SPAWNS };