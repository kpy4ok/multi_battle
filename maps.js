// Tile types
// 0 = empty, 1 = brick, 2 = steel, 3 = water, 4 = bush, 5 = base(eagle)

// Map is 26x26 tiles (each tile = 16px, so 416x416 canvas)
// Standard Battle City map is 13x13 "blocks" where each block = 2x2 tiles

const MAPS = [
  {
    name: "Classic",
    // 26x26 grid of tiles
    tiles: buildMap([
      "..........1111111111..........",
      "..........1111111111..........",
      "1111..1111....11....1111..1111",
      "1111..1111....11....1111..1111",
      "1111..1111..........1111..1111",
      "1111..1111..........1111..1111",
      "1111..........22..........1111",
      "1111..........22..........1111",
      "1111..1111..........1111..1111",
      "1111..1111..........1111..1111",
      "..11..1111..1111....1111..11..",
      "..11..1111..1111....1111..11..",
      "................11............",
      "................11............",
      "..11..11....11111111....11..11",
      "..11..11....11111111....11..11",
      "1111........11....11........11",
      "1111........11....11........11",
      "1111..1111..........1111..1111",
      "1111..1111..........1111..1111",
      "..11..1111..1111....1111..11..",
      "..11..1111..1111....1111..11..",
      "..........1111..1111..........",
      "..........1111..1111..........",
      "............1..1..............",
      "............1551..............",
    ])
  },
  {
    name: "Fortress",
    tiles: buildMap([
      "..........................",
      "..........................",
      "..2222..........2222......",
      "..2222..........2222......",
      "..22..1111..1111..22......",
      "..22..1111..1111..22......",
      "......11........11........",
      "......11........11........",
      "..22..11..2222..11..22....",
      "..22..11..2222..11..22....",
      "......11........11........",
      "......11........11........",
      "..1111..1111..1111..1111..",
      "..1111..1111..1111..1111..",
      "....................22....",
      "....................22....",
      "..11..11......11..11......",
      "..11..11......11..11......",
      "..11..1111..1111..11......",
      "..11..1111..1111..11......",
      "..11..............11......",
      "..11..............11......",
      "..1111111111..1111111111..",
      "..1111111111..1111111111..",
      "............1..1..........",
      "............1551..........",
    ])
  }
];

function buildMap(rows) {
  const grid = [];
  for (let r = 0; r < rows.length; r++) {
    const row = rows[r];
    for (let c = 0; c < row.length; c++) {
      const ch = row[c];
      let val = 0;
      if (ch === '1') val = 1;      // brick
      else if (ch === '2') val = 2; // steel
      else if (ch === '3') val = 3; // water
      else if (ch === '4') val = 4; // bush
      else if (ch === '5') val = 5; // base/eagle
      grid.push(val);
    }
  }
  return grid;
}

// Spawn points for players (tile coords)
const SPAWN_POINTS = [
  { x: 0, y: 24 },   // Player 1: bottom-left
  { x: 24, y: 24 },  // Player 2: bottom-right
  { x: 0, y: 0 },    // Player 3: top-left
  { x: 24, y: 0 },   // Player 4: top-right
];

// Enemy spawn points
const ENEMY_SPAWNS = [
  { x: 0, y: 0 },
  { x: 12, y: 0 },
  { x: 24, y: 0 },
];

module.exports = { MAPS, SPAWN_POINTS, ENEMY_SPAWNS };
